{"version":3,"file":"js/chunks/auth/login-sms-otp.js?id=5a907bf630cf0c83e35b","sources":["webpack:///login-sms-otp.vue","webpack:///./resources/js/views/auth/login-sms-otp.vue?a0cc","webpack:///./resources/js/mixins/auth-form.js","webpack:///./resources/js/views/auth/login-sms-otp.vue","webpack:///./resources/js/views/auth/login-sms-otp.vue?a2a2","webpack:///./resources/js/views/auth/login-sms-otp.vue?8d45"],"sourcesContent":["<template>\n    <div class=\"guest-page\">\n        <box>\n            <animated-loader :is-loading=\"isLoading\" :loader-color=\"vars.loaderColor\" />\n\n            <guest-header>\n                <h5>{{ $t('auth.login.login_using_sms_otp') }}</h5>\n            </guest-header>\n\n            <section role=\"main\">\n\n                <form @submit.prevent=\"submit\">\n                    <base-input :auto-focus=\"!otpRequested\" class=\"mb-3\" :label=\"$t('auth.login.props.mobile')\" type=\"text\" v-model=\"formData.mobile\" addon-left-icon=\"fas fa-mobile\" :error.sync=\"formErrors.mobile\" :disabled=\"otpRequested\">\n                    </base-input>\n\n                    <base-input v-if=\"otpRequested\" :auto-focus=\"otpRequested\" class=\"mb-3\" :label=\"$t('auth.login.props.otp')\" type=\"text\" v-model=\"formData.otp\" addon-left-icon=\"fas fa-key\" :error.sync=\"formErrors.otp\">\n                    </base-input>\n\n                    <div class=\"text-center\">\n                        <base-button type=\"submit\" design=\"primary\" block class=\"my-4 text-lg\">\n                            <span v-if=\"!otpRequested\">{{ $t('auth.login.request_otp') }}</span>\n                            <span v-else>{{ $t('auth.login.login') }}</span>\n                        </base-button>\n                    </div>\n\n                    <div class=\"form-group m-b-0\">\n                        <div class=\"col-sm-12 text-center\">\n                            <p><router-link :to=\"withQuery({ name: 'login' })\" class=\"text-primary m-l-5\">\n                                <span class=\"font-weight-bold\">{{ $t('auth.login.login_using_password') }}</span>\n                            </router-link></p>\n                        </div>\n                    </div>\n\n                </form>\n\n            </section>\n\n        </box>\n\n        <guest-footer v-if=\"configs.system\" :footer-credit=\"configs.system.footerCredit\" :version=\"configs.system.version\" />\n\n    </div>\n</template>\n\n<script>\n    import form from '@mixins/auth-form'\n\n    export default {\n        extends: form,\n        data() {\n            return {\n                formData: {\n                    mobile: '',\n                    otp: '',\n                },\n                otpRequested: false,\n            }\n        },\n        methods: {\n            submit() {\n                this.isLoading = true\n                let routeQuery = this.$route.query\n\n                const formData = this.otpRequested ? { ...this.formData } : { mobile: this.formData.mobile }\n                this.LoginUsingOtp(formData)\n                    .then(response => {\n                        this.$toasted.success(response.message, this.$toastConfig)\n                        \n                        if(this.otpRequested) {\n                            this.$gaEvent('activity', 'loggedin', 'SMSOTP')\n\n                            let routeTo = response.reload ? { name: 'appDashboard', query: { reload: 1 } } : { name: 'appDashboard' }\n\n                            if (routeQuery && routeQuery.ref && this.$router.resolve(routeQuery.ref)) {\n                                routeTo = this.$router.resolve(routeQuery.ref)\n                                    .route\n                            }\n\n                            if (this.hasRole('admin') && this.configs.system && this.configs.system.setupWizard) {\n                                routeTo = { name: 'setup' }\n                            }\n\n                            this.ResetTwoFactorSet()\n                                .then(() => {\n                                    this.$router.push(routeTo)\n                                })\n                                .catch((error) => {\n                                    this.isLoading = false\n                                    this.formErrors = formUtil.handleErrors(error)\n                                })\n                        } else {\n                            this.$gaEvent('activity', 'loginOtpRequested', 'SMSOTP')\n                            \n                            this.otpRequested = true\n                            this.isLoading = false\n                        }\n                    })\n                    .catch(error => {\n                        this.isLoading = false\n                        this.formErrors = formUtil.handleErrors(error)\n                    })\n            },\n        },\n        mounted() {\n            this.SetCSRF()\n        }\n    }\n\n</script>\n<style lang=\"scss\" scoped>\n\n\n</style>\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"guest-page\" },\n    [\n      _c(\n        \"box\",\n        [\n          _c(\"animated-loader\", {\n            attrs: {\n              \"is-loading\": _vm.isLoading,\n              \"loader-color\": _vm.vars.loaderColor\n            }\n          }),\n          _vm._v(\" \"),\n          _c(\"guest-header\", [\n            _c(\"h5\", [_vm._v(_vm._s(_vm.$t(\"auth.login.login_using_sms_otp\")))])\n          ]),\n          _vm._v(\" \"),\n          _c(\"section\", { attrs: { role: \"main\" } }, [\n            _c(\n              \"form\",\n              {\n                on: {\n                  submit: function($event) {\n                    $event.preventDefault()\n                    return _vm.submit.apply(null, arguments)\n                  }\n                }\n              },\n              [\n                _c(\"base-input\", {\n                  staticClass: \"mb-3\",\n                  attrs: {\n                    \"auto-focus\": !_vm.otpRequested,\n                    label: _vm.$t(\"auth.login.props.mobile\"),\n                    type: \"text\",\n                    \"addon-left-icon\": \"fas fa-mobile\",\n                    error: _vm.formErrors.mobile,\n                    disabled: _vm.otpRequested\n                  },\n                  on: {\n                    \"update:error\": function($event) {\n                      return _vm.$set(_vm.formErrors, \"mobile\", $event)\n                    }\n                  },\n                  model: {\n                    value: _vm.formData.mobile,\n                    callback: function($$v) {\n                      _vm.$set(_vm.formData, \"mobile\", $$v)\n                    },\n                    expression: \"formData.mobile\"\n                  }\n                }),\n                _vm._v(\" \"),\n                _vm.otpRequested\n                  ? _c(\"base-input\", {\n                      staticClass: \"mb-3\",\n                      attrs: {\n                        \"auto-focus\": _vm.otpRequested,\n                        label: _vm.$t(\"auth.login.props.otp\"),\n                        type: \"text\",\n                        \"addon-left-icon\": \"fas fa-key\",\n                        error: _vm.formErrors.otp\n                      },\n                      on: {\n                        \"update:error\": function($event) {\n                          return _vm.$set(_vm.formErrors, \"otp\", $event)\n                        }\n                      },\n                      model: {\n                        value: _vm.formData.otp,\n                        callback: function($$v) {\n                          _vm.$set(_vm.formData, \"otp\", $$v)\n                        },\n                        expression: \"formData.otp\"\n                      }\n                    })\n                  : _vm._e(),\n                _vm._v(\" \"),\n                _c(\n                  \"div\",\n                  { staticClass: \"text-center\" },\n                  [\n                    _c(\n                      \"base-button\",\n                      {\n                        staticClass: \"my-4 text-lg\",\n                        attrs: { type: \"submit\", design: \"primary\", block: \"\" }\n                      },\n                      [\n                        !_vm.otpRequested\n                          ? _c(\"span\", [\n                              _vm._v(_vm._s(_vm.$t(\"auth.login.request_otp\")))\n                            ])\n                          : _c(\"span\", [\n                              _vm._v(_vm._s(_vm.$t(\"auth.login.login\")))\n                            ])\n                      ]\n                    )\n                  ],\n                  1\n                ),\n                _vm._v(\" \"),\n                _c(\"div\", { staticClass: \"form-group m-b-0\" }, [\n                  _c(\"div\", { staticClass: \"col-sm-12 text-center\" }, [\n                    _c(\n                      \"p\",\n                      [\n                        _c(\n                          \"router-link\",\n                          {\n                            staticClass: \"text-primary m-l-5\",\n                            attrs: { to: _vm.withQuery({ name: \"login\" }) }\n                          },\n                          [\n                            _c(\"span\", { staticClass: \"font-weight-bold\" }, [\n                              _vm._v(\n                                _vm._s(\n                                  _vm.$t(\"auth.login.login_using_password\")\n                                )\n                              )\n                            ])\n                          ]\n                        )\n                      ],\n                      1\n                    )\n                  ])\n                ])\n              ],\n              1\n            )\n          ])\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _vm.configs.system\n        ? _c(\"guest-footer\", {\n            attrs: {\n              \"footer-credit\": _vm.configs.system.footerCredit,\n              version: _vm.configs.system.version\n            }\n          })\n        : _vm._e()\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { mapGetters, mapActions } from 'vuex'\n\nimport Box from '@js/views/auth/partials/box'\nimport GuestHeader from '@views/layouts/partials/guest-header'\nimport GuestFooter from '@views/layouts/partials/guest-footer'\n\nexport default {\n    components: {\n        Box,\n        GuestHeader,\n        GuestFooter,\n    },\n    data() {\n        return {\n            formData: {},\n            formErrors: {},\n            initialFormData: null,\n            initianLength: 0,\n            emptyFormData: null,\n            preRequisite: {},\n            isLoading: true,\n            icons: {\n                'facebook': 'fab fa-facebook-f',\n                'twitter': 'fab fa-twitter',\n                'github': 'fab fa-github',\n                'google': 'fab fa-google',\n            },\n            btns: {\n                'facebook': 'btn-facebook',\n                'twitter': 'btn-twitter',\n                'github': 'btn-github',\n                'google': 'btn-google-plus',\n            },\n        }\n    },\n    computed: {\n        ...mapGetters('config', [\n            'configs',\n            'vars',\n        ]),\n        ...mapGetters('user', [\n            'twoFactorSet',\n            'hasRole',\n        ]),\n        selectedLocale() {\n            const locale = getQueryStringByParam('locale')\n            return locale ? locale : this.configs.system.locale\n        },\n        showLocaleSwitcher() {\n            return this.configs.system.locales && this.configs.system.locales.length > 1\n        }\n    },\n    methods: {\n        ...mapActions('config', [\n            'GetConfig',\n        ]),\n        ...mapActions('user', [\n            'Register',\n            'SetCSRF',\n            'Logout',\n            'Login',\n            'LoginUsingOtp',\n            'ResetTwoFactorSet',\n            'RequestReset',\n            'ValidateResetPassword',\n            'ResetPassword',\n            'CheckTwoFactorCode',\n        ]),\n\n        withQuery(toRoute, aTag = false, options = {}) {\n            let routeQuery = this.$route.query\n            let href = ''\n\n            if(!toRoute.hasOwnProperty('query')) {\n                toRoute['query'] = {}\n            }\n\n\n            toRoute.query.locale = routeQuery && routeQuery.locale ? routeQuery.locale : undefined\n\n            if(routeQuery && routeQuery.locale) {\n                href = `${href}?locale=${routeQuery.locale}`\n            }\n\n            if (routeQuery && routeQuery.ref && !(options && options.hasOwnProperty('removeRef') && options.removeRef)) {\n                toRoute.query.ref = routeQuery.ref\n\n                if(href) {\n                    href = `?${href}&ref=${routeQuery.ref}`\n                } else {\n                    href = `?${href}&ref=${routeQuery.ref}`\n                }\n\n                if(href) {\n                    href = `?${href}&ref=${routeQuery.ref}`\n                } else {\n                    href = `?${href}&ref=${routeQuery.ref}`\n                }\n            }\n\n            href = `${toRoute.name}${href}`\n\n            if(aTag) {\n                return href\n            }\n\n            return toRoute\n        },\n\n        switchLocale(locale) {\n            let url = window.location.href\n            window.location.href = updateQueryStringParam(url, 'locale', locale.locale)\n        },\n    },\n    mounted() {\n        this.initialFormData = _.cloneDeep(this.formData)\n        this.isLoading = false\n    },\n    beforeDestroy () {\n        delete this.formData\n        delete this.formErrors\n        delete this.preRequisite\n    },\n}\n","import { render, staticRenderFns } from \"./login-sms-otp.vue?vue&type=template&id=28bd276b&scoped=true&\"\nimport script from \"./login-sms-otp.vue?vue&type=script&lang=js&\"\nexport * from \"./login-sms-otp.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28bd276b\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/pia.itebco.com/public_html/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('28bd276b')) {\n      api.createRecord('28bd276b', component.options)\n    } else {\n      api.reload('28bd276b', component.options)\n    }\n    module.hot.accept(\"./login-sms-otp.vue?vue&type=template&id=28bd276b&scoped=true&\", function () {\n      api.rerender('28bd276b', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"resources/js/views/auth/login-sms-otp.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login-sms-otp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login-sms-otp.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login-sms-otp.vue?vue&type=template&id=28bd276b&scoped=true&\""],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AALA;AAOA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AA3CA;AA6CA;AACA;AACA;AA1DA;;;;;;;;;;;;AC/CA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;AC3JA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AAJA;AAdA;AAqBA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAiBA;AAiBA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AA5DA;AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApHA;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAiBA;AACA;AACA;;;;;;;;;;;;ACtCA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}