{"version":3,"file":"js/chunks/app/config/permission/index.js?id=d68dd1c20fb231f591d7","sources":["webpack:///index.vue","webpack:///./resources/js/views/app/config/permission/index.vue?2b87","webpack:///./resources/js/views/app/config/permission/index.vue?a562","webpack:///./resources/js/views/app/config/permission/index.vue?28be","webpack:///./resources/js/api/permission.js","webpack:///./resources/js/views/app/config/permission/index.vue","webpack:///./resources/js/views/app/config/permission/index.vue?40b1","webpack:///./resources/js/views/app/config/permission/index.vue?5b4c","webpack:///./resources/js/views/app/config/permission/index.vue?4b3e"],"sourcesContent":["<template>\n    <base-container boxed with-loader :is-loading=\"isLoading\" :loader-color=\"vars.loaderColor\" class=\"p-0 flex-grow\">\n\n        <div class=\"text-right p-4\">\n            <base-dropdown tag=\"div\" direction=\"down\" menu-classes=\"show-dropdown-up\" position=\"right\">\n                <base-button slot=\"title\" type=\"button\" data-toggle=\"dropdown\" role=\"button\" design=\"info\" size=\"md\"><i class=\"fas fa-boxes\"></i> {{ $t(activeModule+'.'+activeModule) }} <i class=\"fas fa-chevron-down\"></i></base-button>\n\n                <a v-for=\"mod in preRequisite.modules\" class=\"dropdown-item\" @click=\"updateRouteQuery({module: mod})\">\n                    {{ $t(mod+'.'+mod) }}\n                    <i v-if=\"mod == activeModule\" class=\"fas fa-check pull-right\"></i>\n                </a>\n            </base-dropdown>\n        </div>\n\n        <div class=\"table-responsive table-wrapper\">\n            <form @submit.prevent=\"submit\">\n                <table class=\"table b-table table-striped table-hover b-table-stacked-sm\">\n                    <thead>\n                        <tr>\n                            <th>{{ $t('config.permission.permissions') }}</th>\n                            <th v-for=\"rolePermission in formData.roles\">{{ humanize(rolePermission.name) }}</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr v-for=\"permission in preRequisite.permissions\">\n                            <td>{{ humanize(permission) }}</td>\n                            <td v-for=\"rolePermission in formData.roles\">\n                                <base-checkbox class=\"ml-3\" :value=\"permission\" v-model=\"rolePermission.permissions\" :disabled=\"rolePermission.name === 'admin'\"></base-checkbox>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n\n\n                <div class=\"text-right mt-5 px-4 mb-4\">\n                    <base-button type=\"submit\" design=\"primary\">{{ $t('global.save', { attribute: $t('config.permission.permissions') } ) }}</base-button>\n\n                </div>\n            </form>\n        </div>\n    </base-container>\n</template>\n\n<script>\n    import * as PermissionAPI from '@api/permission'\n    import { mapGetters, mapActions } from 'vuex'\n\n    export default {\n        data() {\n            return {\n                activeModule: 'config',\n                formData: {\n                    roles: []\n                },\n                preRequisite: {\n                    roles: [],\n                    permissions: [],\n                    modules: [],\n                    assignedPermissions: [],\n                },\n                formErrors: {},\n                initialFormData: null,\n                isLoading: false\n            }\n        },\n        computed: {\n            ...mapGetters('config', [\n                'vars',\n            ]),\n        },\n        methods: {\n            submit() {\n                this.isLoading = true\n                PermissionAPI.assign({...this.formData, module: this.activeModule})\n                    .then(response => {\n                        this.isLoading = false\n                        this.$toasted.success(response.message, this.$toastConfig.success)\n                    })\n                    .catch(error => {\n                        this.isLoading = false\n                        this.formErrors = formUtil.handleErrors(error)\n                    })\n            },\n            getInitialData() {\n                this.isLoading = true\n                if(this.$route.query && this.$route.query.module) {\n                    this.activeModule = this.$route.query.module\n                }\n                PermissionAPI.getPreRequisite(this.activeModule)\n                    .then(response => {\n                        this.preRequisite = _.cloneDeep(response)\n                        this.formData.roles = []\n                        this.preRequisite.roles.forEach(role => {\n                            let permissions = this.preRequisite.assignedPermissions.find(o => o.role.toUpperCase() === role.name.toUpperCase());\n                            this.formData.roles.push({\n                                name: role.name,\n                                permissions: (permissions != 'undefined') ? permissions.permissions : []\n                            });\n                        });\n                        this.isLoading = false\n                    })\n                    .catch(error => {\n                        this.isLoading = false\n                        this.formErrors = formUtil.handleErrors(error)\n                    })\n            },\n            humanize(word) {\n                return _.startCase(word)\n            },\n            updateRouteQuery(param){\n                const newQuery = Object.assign({}, this.$route.query, param)\n                this.$router.push({ path: this.$route.path, query: newQuery })\n            },\n        },\n        mounted() {\n            this.getInitialData()\n        },\n        watch: {\n            $route() {\n                this.getInitialData()\n            },\n        },\n    }\n\n</script>\n\n<style lang=\"scss\">\n    .table-wrapper.has-checkbox .custom-control-label {\n        &:before {\n            top: -1rem;\n        }\n        &:after {\n            top: -1rem;\n        }\n    }\n</style>\n","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".table-wrapper.has-checkbox .custom-control-label:before {\\n  top: -1rem;\\n}\\n.table-wrapper.has-checkbox .custom-control-label:after {\\n  top: -1rem;\\n}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--9-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-3!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--9-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-3!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--9-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-3!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"base-container\",\n    {\n      staticClass: \"p-0 flex-grow\",\n      attrs: {\n        boxed: \"\",\n        \"with-loader\": \"\",\n        \"is-loading\": _vm.isLoading,\n        \"loader-color\": _vm.vars.loaderColor\n      }\n    },\n    [\n      _c(\n        \"div\",\n        { staticClass: \"text-right p-4\" },\n        [\n          _c(\n            \"base-dropdown\",\n            {\n              attrs: {\n                tag: \"div\",\n                direction: \"down\",\n                \"menu-classes\": \"show-dropdown-up\",\n                position: \"right\"\n              }\n            },\n            [\n              _c(\n                \"base-button\",\n                {\n                  attrs: {\n                    slot: \"title\",\n                    type: \"button\",\n                    \"data-toggle\": \"dropdown\",\n                    role: \"button\",\n                    design: \"info\",\n                    size: \"md\"\n                  },\n                  slot: \"title\"\n                },\n                [\n                  _c(\"i\", { staticClass: \"fas fa-boxes\" }),\n                  _vm._v(\n                    \" \" +\n                      _vm._s(\n                        _vm.$t(_vm.activeModule + \".\" + _vm.activeModule)\n                      ) +\n                      \" \"\n                  ),\n                  _c(\"i\", { staticClass: \"fas fa-chevron-down\" })\n                ]\n              ),\n              _vm._v(\" \"),\n              _vm._l(_vm.preRequisite.modules, function(mod) {\n                return _c(\n                  \"a\",\n                  {\n                    staticClass: \"dropdown-item\",\n                    on: {\n                      click: function($event) {\n                        return _vm.updateRouteQuery({ module: mod })\n                      }\n                    }\n                  },\n                  [\n                    _vm._v(\n                      \"\\n                \" +\n                        _vm._s(_vm.$t(mod + \".\" + mod)) +\n                        \"\\n                \"\n                    ),\n                    mod == _vm.activeModule\n                      ? _c(\"i\", { staticClass: \"fas fa-check pull-right\" })\n                      : _vm._e()\n                  ]\n                )\n              })\n            ],\n            2\n          )\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"table-responsive table-wrapper\" }, [\n        _c(\n          \"form\",\n          {\n            on: {\n              submit: function($event) {\n                $event.preventDefault()\n                return _vm.submit.apply(null, arguments)\n              }\n            }\n          },\n          [\n            _c(\n              \"table\",\n              {\n                staticClass:\n                  \"table b-table table-striped table-hover b-table-stacked-sm\"\n              },\n              [\n                _c(\"thead\", [\n                  _c(\n                    \"tr\",\n                    [\n                      _c(\"th\", [\n                        _vm._v(_vm._s(_vm.$t(\"config.permission.permissions\")))\n                      ]),\n                      _vm._v(\" \"),\n                      _vm._l(_vm.formData.roles, function(rolePermission) {\n                        return _c(\"th\", [\n                          _vm._v(_vm._s(_vm.humanize(rolePermission.name)))\n                        ])\n                      })\n                    ],\n                    2\n                  )\n                ]),\n                _vm._v(\" \"),\n                _c(\n                  \"tbody\",\n                  _vm._l(_vm.preRequisite.permissions, function(permission) {\n                    return _c(\n                      \"tr\",\n                      [\n                        _c(\"td\", [_vm._v(_vm._s(_vm.humanize(permission)))]),\n                        _vm._v(\" \"),\n                        _vm._l(_vm.formData.roles, function(rolePermission) {\n                          return _c(\n                            \"td\",\n                            [\n                              _c(\"base-checkbox\", {\n                                staticClass: \"ml-3\",\n                                attrs: {\n                                  value: permission,\n                                  disabled: rolePermission.name === \"admin\"\n                                },\n                                model: {\n                                  value: rolePermission.permissions,\n                                  callback: function($$v) {\n                                    _vm.$set(rolePermission, \"permissions\", $$v)\n                                  },\n                                  expression: \"rolePermission.permissions\"\n                                }\n                              })\n                            ],\n                            1\n                          )\n                        })\n                      ],\n                      2\n                    )\n                  }),\n                  0\n                )\n              ]\n            ),\n            _vm._v(\" \"),\n            _c(\n              \"div\",\n              { staticClass: \"text-right mt-5 px-4 mb-4\" },\n              [\n                _c(\n                  \"base-button\",\n                  { attrs: { type: \"submit\", design: \"primary\" } },\n                  [\n                    _vm._v(\n                      _vm._s(\n                        _vm.$t(\"global.save\", {\n                          attribute: _vm.$t(\"config.permission.permissions\")\n                        })\n                      )\n                    )\n                  ]\n                )\n              ],\n              1\n            )\n          ]\n        )\n      ])\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import request from '@core/utils/request'\nconst apiUrl = '/config/permissions';\n\nexport function getPreRequisite(module) {\n    return request({\n        url: apiUrl + '/pre-requisite',\n        method: 'get',\n        params: {\n            module\n        }\n    })\n}\n\nexport function assign(data) {\n    return request({\n        url: apiUrl + '/assign',\n        method: 'post',\n        data\n    })\n}\n","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3167ef22&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/pia.itebco.com/public_html/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('3167ef22')) {\n      api.createRecord('3167ef22', component.options)\n    } else {\n      api.reload('3167ef22', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=3167ef22&\", function () {\n      api.rerender('3167ef22', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"resources/js/views/app/config/permission/index.vue\"\nexport default component.exports","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../../node_modules/style-loader/index.js!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--9-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-3!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=template&id=3167ef22&\""],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AAbA;AAeA;AACA;AAKA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AA1CA;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAtEA;;;;;;;;;;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC/LA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AADA;AAHA;AAOA;AAEA;AACA;AACA;AACA;AACA;AAHA;AAKA;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAiBA;AACA;AACA;;;;;;;;;;;;ACvCA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}