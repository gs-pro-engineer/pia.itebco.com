{"version":3,"file":"js/chunks/app/product/update.js?id=33670acbf54df2afa2d8","sources":["webpack:///update.vue","webpack:///./resources/js/views/app/product/update.vue?fe1a","webpack:///./resources/js/views/app/product/update.vue","webpack:///./resources/js/views/app/product/update.vue?cdb7","webpack:///./resources/js/views/app/product/update.vue?cdd9"],"sourcesContent":["<template>\n    <base-container boxed with-loader min-height=\"full\" :is-loading=\"isLoading || !product.currentVersion\" :loader-color=\"vars.loaderColor\" class=\"d-flex align-items-center\">\n        <div class=\"text-center mt-2\" v-if=\"product.currentVersion === product.latestVersion\">\n            <h3 class=\"text-muted mb-3\">No update available!</h3>\n            <p class=\"text-muted\">We are constantly working on new features and fixes. We release new update after completing the development and thorough testing. Kindly check later for new updates.</p>\n            <div class=\"mt-5 mt-2\">\n                <router-link :to=\"{ name: 'appDashboard' }\" class=\"btn btn-primary\">{{ $t('general.go_to_dashboard') }}</router-link>\n            </div>\n        </div>\n\n        <div v-else-if=\"!isProcessing\" class=\"w-100\">\n            <div v-html=\"updateTips\"></div>\n\n            <div class=\"row mt-4\">\n                <div class=\"col-12 col-md-4\">\n                    <div class=\"label-group\">\n                        <label class=\"text-muted\">Version Available</label>\n                        <p class=\"font-weight-bold\">{{ product.nextReleaseVersion }}</p>\n                    </div>\n                </div>\n                <div class=\"col-12 col-md-4\">\n                    <div class=\"label-group\">\n                        <label class=\"text-muted\">Date of Release</label>\n                        <p class=\"font-weight-bold\">{{ product.nextReleaseDate | moment(vars.defaultDateFormat) }}</p>\n                    </div>\n                </div>\n                <div class=\"col-12 col-md-4\">\n                    <div class=\"label-group\">\n                        <label class=\"text-muted\">Update Size</label>\n                        <p class=\"font-weight-bold\">{{ getFileSize(product.nextReleaseSize) }}</p>\n                    </div>\n                </div>\n            </div>\n\n            <hr class=\"my-4\">\n\n            <div v-html=\"product.nextReleaseChangeLog\"></div>\n\n            <hr class=\"my-4\">\n\n            <p class=\"text-info my-2\" v-if=\"isDownloaded\">{{ $t('product.update_downloaded') }}</p>\n\n            <div class=\"row\">\n                <div class=\"col-12 col-md-6\" v-if=\"!isDownloaded\">\n                    <base-button type=\"button\" design=\"success\" block class=\"my-4\" key=\"download\" @click=\"confirmDownload(0)\">{{ $t('product.download') }}</base-button>\n                </div>\n                <div class=\"col-12 col-md-6\" v-else>\n                    <base-button type=\"button\" design=\"primary\" block class=\"my-4\" key=\"directupdate\" @click=\"confirmUpdate()\">{{ $t('product.apply_updates') }}</base-button>\n                </div>\n            </div>\n\n        </div>\n\n        <div v-else class=\"w-100 text-center\">\n            <h5 class=\"text-warning\">{{ $t('product.dont_do_anything') }}</h5>\n            <h4 class=\"my-4\" v-if=\"isDownloading\">{{ $t('product.update_size') }} ({{ getFileSize(product.nextReleaseSize) }}) - {{ $t('product.downloading') }}...</h4>\n            <h4 class=\"my-4\" v-if=\"isUpdating\">{{ $t('product.applying_updates') }}...</h4>\n\n            <div class=\"d-flex justify-content-center\">\n                <animated-loader :is-loading=\"isProcessing\" :loader-color=\"vars.loaderColor\" overlay-color=\"transparent\" size=\"inline\" />\n            </div>\n        </div>\n    </base-container>\n</template>\n\n<script>\n    import { mapGetters, mapActions } from 'vuex'\n    import { bytesToFileSize } from '@js/core/utils/formatter'\n\n    export default {\n        data() {\n            return {\n                isLoading: false,\n                isProcessing: false,\n                isDownloading: false,\n                isUpdating: false,\n            }\n        },\n        computed: {\n            ...mapGetters('config', [\n                'configs',\n                'vars',\n            ]),\n            ...mapGetters('product', [\n                'product',\n                'updateTips',\n                'isDownloaded',\n            ]),\n            formData(){\n                return {\n                    build: this.product.nextReleaseBuild,\n                    version: this.product.nextReleaseVersion\n                }\n            },\n        },\n        methods: {\n            ...mapActions('product', [\n                'PostSupport',\n                'DownloadApp',\n                'UpdateApp',\n            ]),\n            getFileSize(size){\n                return bytesToFileSize(size)\n            },\n            confirmUpdate(){\n                swtAlert.fire({\n                        title: 'Are you sure?',\n                        text: \"This will update this application to the latest version.\",\n                        icon: 'warning',\n                        showCancelButton: true,\n                        confirmButtonText: 'Yes, update!',\n                        cancelButtonText: 'No, cancel!'\n                    })\n                    .then((result) => {\n                        if (result.value) {\n                            this.update()\n                        }\n                    })\n            },\n            confirmDownload(action){\n                const message = action === 0 ? \"This will download the latest version of the application.\" : \"This will download and update the application to the latest version.\"\n                swtAlert.fire({\n                        title: 'Are you sure?',\n                        text: message,\n                        icon: 'warning',\n                        showCancelButton: true,\n                        confirmButtonText: action === 0 ? 'Yes, download!' : 'Yes, update!',\n                        cancelButtonText: 'No, cancel!'\n                    })\n                    .then((result) => {\n                        if (result.value) {\n                            this.download(action)\n                        }\n                    })\n            },\n            download(action) {\n                this.isProcessing = true\n                this.isDownloading = true\n                this.isUpdating = false\n                this.DownloadApp()\n                    .then(response => {\n                        this.isDownloading = false\n                        this.isUpdating = false\n                        this.$toasted.success(response.message, this.$toastConfig.success)\n                        if(action) {\n                            this.update()\n                        } else {\n                            this.isProcessing = false\n                        }\n                    })\n                    .catch(error => {\n                        this.isLoading = false\n                        formUtil.handleErrors(error)\n                        this.isProcessing = false\n                        this.isDownloading = false\n                        this.isUpdating = false\n                    })\n            },\n            update() {\n                this.isProcessing = true\n                this.isDownloading = false\n                this.isUpdating = true\n                this.UpdateApp(this.formData)\n                    .then(response => {\n                        this.$toasted.success(response.message, this.$toastConfig.success)\n                        setTimeout(() => {\n                            location.reload()\n                        }, 2000)\n                    })\n                    .catch(error => {\n                        this.isLoading = false\n                        formUtil.handleErrors(error)\n                        this.isProcessing = false\n                        this.isDownloading = false\n                        this.isUpdating = false\n                    })\n            },\n        }\n    }\n\n</script>\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"base-container\",\n    {\n      staticClass: \"d-flex align-items-center\",\n      attrs: {\n        boxed: \"\",\n        \"with-loader\": \"\",\n        \"min-height\": \"full\",\n        \"is-loading\": _vm.isLoading || !_vm.product.currentVersion,\n        \"loader-color\": _vm.vars.loaderColor\n      }\n    },\n    [\n      _vm.product.currentVersion === _vm.product.latestVersion\n        ? _c(\"div\", { staticClass: \"text-center mt-2\" }, [\n            _c(\"h3\", { staticClass: \"text-muted mb-3\" }, [\n              _vm._v(\"No update available!\")\n            ]),\n            _vm._v(\" \"),\n            _c(\"p\", { staticClass: \"text-muted\" }, [\n              _vm._v(\n                \"We are constantly working on new features and fixes. We release new update after completing the development and thorough testing. Kindly check later for new updates.\"\n              )\n            ]),\n            _vm._v(\" \"),\n            _c(\n              \"div\",\n              { staticClass: \"mt-5 mt-2\" },\n              [\n                _c(\n                  \"router-link\",\n                  {\n                    staticClass: \"btn btn-primary\",\n                    attrs: { to: { name: \"appDashboard\" } }\n                  },\n                  [_vm._v(_vm._s(_vm.$t(\"general.go_to_dashboard\")))]\n                )\n              ],\n              1\n            )\n          ])\n        : !_vm.isProcessing\n        ? _c(\"div\", { staticClass: \"w-100\" }, [\n            _c(\"div\", { domProps: { innerHTML: _vm._s(_vm.updateTips) } }),\n            _vm._v(\" \"),\n            _c(\"div\", { staticClass: \"row mt-4\" }, [\n              _c(\"div\", { staticClass: \"col-12 col-md-4\" }, [\n                _c(\"div\", { staticClass: \"label-group\" }, [\n                  _c(\"label\", { staticClass: \"text-muted\" }, [\n                    _vm._v(\"Version Available\")\n                  ]),\n                  _vm._v(\" \"),\n                  _c(\"p\", { staticClass: \"font-weight-bold\" }, [\n                    _vm._v(_vm._s(_vm.product.nextReleaseVersion))\n                  ])\n                ])\n              ]),\n              _vm._v(\" \"),\n              _c(\"div\", { staticClass: \"col-12 col-md-4\" }, [\n                _c(\"div\", { staticClass: \"label-group\" }, [\n                  _c(\"label\", { staticClass: \"text-muted\" }, [\n                    _vm._v(\"Date of Release\")\n                  ]),\n                  _vm._v(\" \"),\n                  _c(\"p\", { staticClass: \"font-weight-bold\" }, [\n                    _vm._v(\n                      _vm._s(\n                        _vm._f(\"moment\")(\n                          _vm.product.nextReleaseDate,\n                          _vm.vars.defaultDateFormat\n                        )\n                      )\n                    )\n                  ])\n                ])\n              ]),\n              _vm._v(\" \"),\n              _c(\"div\", { staticClass: \"col-12 col-md-4\" }, [\n                _c(\"div\", { staticClass: \"label-group\" }, [\n                  _c(\"label\", { staticClass: \"text-muted\" }, [\n                    _vm._v(\"Update Size\")\n                  ]),\n                  _vm._v(\" \"),\n                  _c(\"p\", { staticClass: \"font-weight-bold\" }, [\n                    _vm._v(_vm._s(_vm.getFileSize(_vm.product.nextReleaseSize)))\n                  ])\n                ])\n              ])\n            ]),\n            _vm._v(\" \"),\n            _c(\"hr\", { staticClass: \"my-4\" }),\n            _vm._v(\" \"),\n            _c(\"div\", {\n              domProps: { innerHTML: _vm._s(_vm.product.nextReleaseChangeLog) }\n            }),\n            _vm._v(\" \"),\n            _c(\"hr\", { staticClass: \"my-4\" }),\n            _vm._v(\" \"),\n            _vm.isDownloaded\n              ? _c(\"p\", { staticClass: \"text-info my-2\" }, [\n                  _vm._v(_vm._s(_vm.$t(\"product.update_downloaded\")))\n                ])\n              : _vm._e(),\n            _vm._v(\" \"),\n            _c(\"div\", { staticClass: \"row\" }, [\n              !_vm.isDownloaded\n                ? _c(\n                    \"div\",\n                    { staticClass: \"col-12 col-md-6\" },\n                    [\n                      _c(\n                        \"base-button\",\n                        {\n                          key: \"download\",\n                          staticClass: \"my-4\",\n                          attrs: {\n                            type: \"button\",\n                            design: \"success\",\n                            block: \"\"\n                          },\n                          on: {\n                            click: function($event) {\n                              return _vm.confirmDownload(0)\n                            }\n                          }\n                        },\n                        [_vm._v(_vm._s(_vm.$t(\"product.download\")))]\n                      )\n                    ],\n                    1\n                  )\n                : _c(\n                    \"div\",\n                    { staticClass: \"col-12 col-md-6\" },\n                    [\n                      _c(\n                        \"base-button\",\n                        {\n                          key: \"directupdate\",\n                          staticClass: \"my-4\",\n                          attrs: {\n                            type: \"button\",\n                            design: \"primary\",\n                            block: \"\"\n                          },\n                          on: {\n                            click: function($event) {\n                              return _vm.confirmUpdate()\n                            }\n                          }\n                        },\n                        [_vm._v(_vm._s(_vm.$t(\"product.apply_updates\")))]\n                      )\n                    ],\n                    1\n                  )\n            ])\n          ])\n        : _c(\"div\", { staticClass: \"w-100 text-center\" }, [\n            _c(\"h5\", { staticClass: \"text-warning\" }, [\n              _vm._v(_vm._s(_vm.$t(\"product.dont_do_anything\")))\n            ]),\n            _vm._v(\" \"),\n            _vm.isDownloading\n              ? _c(\"h4\", { staticClass: \"my-4\" }, [\n                  _vm._v(\n                    _vm._s(_vm.$t(\"product.update_size\")) +\n                      \" (\" +\n                      _vm._s(_vm.getFileSize(_vm.product.nextReleaseSize)) +\n                      \") - \" +\n                      _vm._s(_vm.$t(\"product.downloading\")) +\n                      \"...\"\n                  )\n                ])\n              : _vm._e(),\n            _vm._v(\" \"),\n            _vm.isUpdating\n              ? _c(\"h4\", { staticClass: \"my-4\" }, [\n                  _vm._v(_vm._s(_vm.$t(\"product.applying_updates\")) + \"...\")\n                ])\n              : _vm._e(),\n            _vm._v(\" \"),\n            _c(\n              \"div\",\n              { staticClass: \"d-flex justify-content-center\" },\n              [\n                _c(\"animated-loader\", {\n                  attrs: {\n                    \"is-loading\": _vm.isProcessing,\n                    \"loader-color\": _vm.vars.loaderColor,\n                    \"overlay-color\": \"transparent\",\n                    size: \"inline\"\n                  }\n                })\n              ],\n              1\n            )\n          ])\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./update.vue?vue&type=template&id=7db2cb56&\"\nimport script from \"./update.vue?vue&type=script&lang=js&\"\nexport * from \"./update.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/pia.itebco.com/public_html/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('7db2cb56')) {\n      api.createRecord('7db2cb56', component.options)\n    } else {\n      api.reload('7db2cb56', component.options)\n    }\n    module.hot.accept(\"./update.vue?vue&type=template&id=7db2cb56&\", function () {\n      api.rerender('7db2cb56', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"resources/js/views/app/product/update.vue\"\nexport default component.exports","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./update.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./update.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./update.vue?vue&type=template&id=7db2cb56&\""],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AAUA;AACA;AACA;AACA;AAFA;AAIA;AAfA;AAiBA;AAMA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AASA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AASA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAjFA;AA1BA;;;;;;;;;;;;ACrEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC/MA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAiBA;AACA;AACA;;;;;;;;;;;;ACtCA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}